{% extends 'base.html' %}
{% load static %}

{% block title %}
    ورود به حساب
{% endblock %}

{% block content %}
    <!-- Form -->
    <div class="container content-space-3 content-space-t-lg-4 content-space-b-lg-3">
        <div class="flex-grow-1 mx-auto" style="max-width: 28rem;">
            <!-- Heading -->
            <div class="text-center mb-5 mb-md-7">
                <h1 class="h2">فرم ورود</h1>
                <p>برای مدیریت حساب خود وارد شوید.</p>
            </div>
            <!-- End Heading -->

            <!-- Form -->
            <form action="{% url 'accounts:login' %}" method="POST">
                {% csrf_token %}

                <div class="mb-4">
                    <label class="form-label" for="signupSimpleLoginEmail">ایمیل شما</label>
                    <input type="email" class="form-control form-control-lg text-center"
                           name="username" id="signupSimpleLoginEmail" placeholder="mail@gmail.com">
                </div>

                <div class="mb-4">
                    <label class="form-label" for="signupSimpleLoginPassword">کلمه عبور</label>
                    <div class="position-relative">
                        <input type="password"
                               class="form-control form-control-lg text-center pe-5"
                               name="password" id="signupSimpleLoginPassword"
                               placeholder="*******">
                        <i id="togglePasswordIcon"
                           class="bi bi-eye position-absolute top-50 end-0 translate-middle-y me-3"
                           style="cursor: pointer; font-size: 1.2rem;"></i>
                    </div>
                </div>
                <!-- End Form -->

                <div class="d-grid mb-3">
                    <a class="form-label-link" href="{% url 'accounts:reset_password' %}">رمز عبور را فراموش کرده اید؟</a>
                    <button type="submit" class="btn btn-primary btn-lg">ورود</button>
                </div>

                <div class="text-center">
                    <p>حساب کاربری ندارید؟ <a class="link" href="{% url 'accounts:signup' %}">اینجا ثبت نام کنید</a></p>
                </div>
            </form>
            <!-- End Form -->

        </div>
    </div>
    <!-- End Form -->
{% endblock %}

{% block js %}
    <script>
        {% if messages %}
            {% for message in messages %}
                Toastify({
                    text: "{{ message }}",
                    duration: 5000,
                    gravity: "top",
                    position: "right",
                    close: true,
                    style: {
                        background: "{% if message.tags == 'error' %}#e74c3c{% else %}#2ecc71{% endif %}",
                    },
                }).showToast();
            {% endfor %}
        {% endif %}
    </script>


    <script>
        // eye password
        const passwordField = document.getElementById("signupSimpleLoginPassword");
        const togglePasswordIcon = document.getElementById("togglePasswordIcon");

        togglePasswordIcon.addEventListener("click", function () {
            const type = passwordField.getAttribute("type") === "password" ? "text" : "password";
            passwordField.setAttribute("type", type);

            this.classList.toggle("bi-eye");
            this.classList.toggle("bi-eye-slash");
        });
    </script>

{% endblock %}