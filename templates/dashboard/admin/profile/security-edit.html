{% extends 'dashboard/admin/base.html' %}
{% load static %}
{% load humanize %}

{% block title %}
    داشبورد - تنظیمات امنیتی
{% endblock %}

{% block breadcrumb %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb breadcrumb-light mb-0">
            <li class="breadcrumb-item"> حساب</li>
            <li class="breadcrumb-item"> داشبورد ادمین</li>
            <li class="breadcrumb-item active" aria-current="page">
                تنظیمات امنیتی
            </li>
        </ol>
    </nav>
{% endblock %}

{% block content %}

    <!-- Card -->
    <div class="card mb-3">
        <div class="card-header border-bottom">
            <h5 class="card-header-title">رمزعبور</h5>
        </div>

        <div class="card-body">

            <form action="." method="post">
                {% csrf_token %}

                <!-- رمز عبور فعلی -->
                <div class="row mb-4 position-relative">
                    <label for="old_password" class="col-sm-3 col-form-label form-label">
                        رمز عبور فعلی
                    </label>
                    <div class="col-sm-9 position-relative">
                        <input type="password" class="form-control text-center"
                               name="old_password" id="old_password"
                               placeholder="رمز عبور فعلی را وارد کنید">
                        <i class="bi bi-eye-slash password-toggle"
                           onclick="togglePassword('old_password', this)"
                           style="position:absolute; top:50%; right:25px;
                           transform:translateY(-50%); cursor:pointer;">
                        </i>
                    </div>
                </div>

                <!-- رمز عبور جدید -->
                <div class="row mb-4 position-relative">
                    <label for="new_password" class="col-sm-3 col-form-label form-label">
                        رمز عبور جدید
                    </label>
                    <div class="col-sm-9 position-relative">
                        <input type="password" class="form-control text-center"
                               name="new_password" id="new_password"
                               placeholder="رمز عبور جدید را وارد کنید">
                        <i class="bi bi-eye-slash password-toggle"
                           onclick="togglePassword('new_password', this)"
                           style="position:absolute; top:50%; right:25px;
                           transform:translateY(-50%); cursor:pointer;">
                        </i>
                    </div>
                </div>

                <!-- تایید رمز عبور جدید -->
                <div class="row mb-4 position-relative">
                    <label for="confirm_password" class="col-sm-3 col-form-label form-label">
                        رمز عبور جدید را تایید کنید
                    </label>
                    <div class="col-sm-9 position-relative">
                        <input type="password" class="form-control text-center"
                               name="confirm_password" id="confirm_password"
                               placeholder="رمز عبور جدید را مجدد وارد کنید">
                        <i class="bi bi-eye-slash password-toggle"
                           onclick="togglePassword('confirm_password', this)"
                           style="position:absolute; top:50%; right:25px;
                           transform:translateY(-50%); cursor:pointer;">
                        </i>
                    </div>
                </div>

                <div class="row mb-4 position-relative">
                    <h5 class="mt-3">الزامات رمز عبور:</h5>
                    <p class="card-text small">اطمینان حاصل کنید که این الزامات برآورده شده است:</p>
                    <ul class="small">
                        <li>حداقل 8 کاراکتر - هر چه بیشتر باشد، بهتر است</li>
                        <li>حداقل یک نویسه کوچک</li>
                        <li>حداقل یک کاراکتر بزرگ</li>
                        <li>حداقل یک عدد، نماد یا نویسه فضای خالی</li>
                    </ul>
                </div>

                <div class="d-flex justify-content-end gap-3">
                    <button type="submit" class="btn btn-primary">
                        بروزرسانی رمزعبور
                    </button>
                </div>
            </form>


        </div>
    </div>
    <!-- End Card -->


    <!-- Card -->
    <div class="card">
        <div class="card-header border-bottom">
            <h5 class="card-header-title">حساب های متصل</h5>
        </div>

        <!-- Body -->
        <div class="card-body">
            <p class="card-text">
                ویژگی‌ های یکپارچه این حساب‌ ها، همکاری با افرادی را که در milad می‌شناسید آسان ‌تر می‌کند.
            </p>

            <!-- Form -->
            <form>
                <!-- List Group -->
                <div class="list-group list-group-flush list-group-no-gutters">
                    <!-- Item -->
                    <div class="list-group-item">
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <img class="avatar avatar-xs avatar-4x3"
                                     src="{% static 'svg/brands/google-icon.svg' %}"
                                     alt="Image">
                            </div>

                            <div class="flex-grow-1 ms-3">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <h6 class="mb-1 me-2">گوگل</h6>
                                        <span class="d-block small text-body me-2">
                                            تقویم و مخاطبین
                                        </span>
                                    </div>
                                    <!-- End Col -->

                                    <div class="col-auto">
                                        <!-- Form Switch -->
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="connectedAccounts1">
                                            <label class="form-check-label" for="connectedAccounts1"></label>
                                        </div>
                                        <!-- End Form Switch -->
                                    </div>
                                    <!-- End Col -->
                                </div>
                                <!-- End Row -->
                            </div>
                        </div>
                    </div>
                    <!-- End Item -->

                </div>
                <!-- End List Group -->
            </form>
            <!-- End Form -->
        </div>
        <!-- End Body -->
    </div>
    <!-- End Card -->

{% endblock %}


{% block js %}

    {% if messages %}
        <script>
            window.addEventListener("load", function () {
                {% for message in messages %}
                    {% if 'success' in message.tags %}
                        Swal.fire({
                            icon: 'success',
                            title: '{{ message|escapejs }}',
                            confirmButtonText: "باشه",
                            showConfirmButton: true,
                            customClass: {
                                title: 'swal-title-lg'  // کلاس برای متن بزرگ
                            }
                        }).then(() => {
                            window.location.href = "{% url 'dashboard:admin:home' %}";
                        });
                    {% else %}
                        Swal.fire({
                            icon: "{% if 'error' in message.tags %}error{% elif 'warning' in message.tags %}
                                warning{% else %}info{% endif %}",
                            title: '{{ message|escapejs }}',
                            confirmButtonText: "باشه",
                            confirmButtonColor: "#3085d6",
                            customClass: {
                                title: 'swal-title-sm'  // کلاس برای متن کوچک
                            }
                        });
                    {% endif %}
                {% endfor %}
            });
        </script>

        <style>
            .swal-title-lg {
                font-size: 1.5rem; /* تغییر فونت مسیج بزرگ‌تر */
            }

            .swal-title-sm {
                font-size: 1.5rem; /* تغییر فونت مسیج کوچک‌تر */
            }
        </style>

    {% endif %}



    <script>
        function togglePassword(fieldId, icon) {
            const field = document.getElementById(fieldId);
            if (field.type === "password") {
                field.type = "text";
                icon.classList.remove("bi-eye-slash");
                icon.classList.add("bi-eye");
            } else {
                field.type = "password";
                icon.classList.remove("bi-eye");
                icon.classList.add("bi-eye-slash");
            }
        }
    </script>


{% endblock %}